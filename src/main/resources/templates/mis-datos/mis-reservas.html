<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{plantilla/fragmentos.html :: headfiles}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Reservas</title>
</head>
<body>
    <div class="container-fluid">
        <div th:replace="~{plantilla/fragmentos.html :: navigation}"></div>

        <h3>Mis Reservas</h3>

        <div th:if="${mensajeError}" class="alert alert-danger" role="alert">
            <span th:text="${mensajeError}"></span>
        </div>

        <div class="mb-3">
            <a class="btn btn-primary" th:href="|mis-reservas/add|">Agregar Reserva</a>
        </div>

        <div class="mb-3">
            <form method="get" th:action="@{/mis-datos/mis-reservas}">
                <label for="instalacionId"><strong> Filtrar por instalaci칩n:</strong></label>
                <select id="instalacionId" name="instalacionId" class="form-control" onchange="this.form.submit()">
                    <option value="">Todas las instalaciones</option>
                    <option th:each="instalacion : ${instalaciones}"
                            th:value="${instalacion.id}"
                            th:text="${instalacion.nombre}"
                            th:selected="${instalacion.id == instalacionSeleccionada}">
                    </option>
                </select>
            </form>
        </div>

        <div class="container">
            <div class="border rounded-3 m-2 p-2 border-2">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Instalaci칩n</th>
                            <th>Fecha</th>
                            <th>Horario</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="reserva : ${reservas}">
                            <td th:text="${reserva.id}" hidden>ID</td>
                            <td th:text="${reserva.horario.instalacion.nombre}">Nombre Instalaci칩n</td>
                            <td th:text="${reserva.fecha}"></td>
                            <td th:text="${reserva.horario.horaInicio + ' - ' + reserva.horario.horaFin}">Horario</td>
                            <td>
                                <a class="btn btn-success btn-sm" th:href="|mis-reservas/edit/${reserva.id}|">Editar</a>
                                <a class="btn btn-danger btn-sm" th:href="|mis-reservas/del/${reserva.id}|">Borrar</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div>
                <nav aria-label="Page navigation example">
                    <ul class="pagination">
                        <li class="page-item">
                            <a class="page-link" th:href="${page.hasPrevious()} ? |/mis-datos/mis-reservas?page=${page.number -1}| : '#'">
                                <i class="fa-solid fa-chevron-left"></i> Anterior
                            </a>
                        </li>
                        <li class="page-item">
                            <span class="page-link active" th:text="|P치gina ${page.number+1} de ${page.totalPages}|"></span>
                        </li>
                        <li class="page-item">
                            <a class="page-link" th:href="${page.hasNext()} ? |/mis-datos/mis-reservas?page=${page.number +1}| : '#'">
                                Siguiente <i class="fa-solid fa-chevron-right"></i>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
            
        </div>
 
        <div th:replace="~{plantilla/fragmentos.html :: footer}"></div>
    </div>
</body>
</html>